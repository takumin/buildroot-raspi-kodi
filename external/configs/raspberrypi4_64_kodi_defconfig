# Mirrors
BR2_DL_DIR="$(DL_DIR)"
BR2_KERNEL_MIRROR="https://ftp.jaist.ac.jp/pub/Linux/kernel.org"
BR2_GNU_MIRROR="https://ftp.jaist.ac.jp/pub/GNU"
BR2_CPAN_MIRROR="https://ftp.jaist.ac.jp/pub/CPAN"

# Toolchain
BR2_TOOLCHAIN=y
BR2_TOOLCHAIN_EXTERNAL=y
BR2_TOOLCHAIN_EXTERNAL_DOWNLOAD=y
BR2_TOOLCHAIN_EXTERNAL_ARM_AARCH64=y

# Ccache
BR2_CCACHE=y
BR2_CCACHE_DIR="$(CCACHE_DIR)"
BR2_CCACHE_INITIAL_SETUP="--max-size 8G"

# Disable build-id
BR2_REPRODUCIBLE=y

# Architecture
BR2_aarch64=y
BR2_cortex_a72=y
BR2_ARM_FPU_VFPV4=y

# System
BR2_INIT_SYSTEMD=y
BR2_SYSTEM_DHCP="end0"
BR2_SYSTEM_DEFAULT_PATH="/usr/sbin:/usr/bin:/sbin:/bin"
BR2_TARGET_ENABLE_ROOT_LOGIN=y
BR2_TARGET_GENERIC_ROOT_PASSWD="root"
BR2_TARGET_GENERIC_PASSWD_SHA512=y
BR2_TARGET_GENERIC_GETTY_PORT="ttyAMA0"
BR2_TARGET_TZ_INFO=y
BR2_TARGET_TZ_ZONELIST="default"
BR2_TARGET_LOCALTIME="Asia/Tokyo"

# Linux headers same as kernel, a 6.1 series
BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_6_1=y

# Kernel
BR2_LINUX_KERNEL=y
BR2_LINUX_KERNEL_CUSTOM_TARBALL=y
BR2_LINUX_KERNEL_CUSTOM_TARBALL_LOCATION="$(call github,raspberrypi,linux,a1caea3c996f6bfa8c9568f521257f4e473285fb)/linux-a1caea3c996f6bfa8c9568f521257f4e473285fb.tar.gz"
BR2_LINUX_KERNEL_DEFCONFIG="bcm2711"

# Build the DTB from the kernel sources
BR2_LINUX_KERNEL_DTS_SUPPORT=y
BR2_LINUX_KERNEL_DTB_OVERLAY_SUPPORT=y
BR2_LINUX_KERNEL_INTREE_DTS_NAME="broadcom/bcm2711-rpi-4-b"

# Kernel Compression
BR2_LINUX_KERNEL_XZ=y

# Host OpenSSL Package
BR2_LINUX_KERNEL_NEEDS_HOST_OPENSSL=y

# Host Handle Kernel Modules
BR2_PACKAGE_HOST_KMOD=y
BR2_PACKAGE_HOST_KMOD_XZ=y

# Handle Kernel Modules
BR2_PACKAGE_KMOD=y
BR2_PACKAGE_KMOD_TOOLS=y
BR2_PACKAGE_XZ=y

# Merge /usr directory
BR2_ROOTFS_MERGED_USR=y

# Rootfs
BR2_ROOTFS_USERS_TABLES="$(BR2_EXTERNAL_RASPI_PATH)/board/users-tables.txt"
BR2_ROOTFS_POST_BUILD_SCRIPT="$(BR2_EXTERNAL_RASPI_PATH)/board/post-build.sh"
BR2_ROOTFS_POST_FAKEROOT_SCRIPT="$(BR2_EXTERNAL_RASPI_PATH)/board/post-fakeroot.sh"
BR2_ROOTFS_POST_IMAGE_SCRIPT="$(BR2_EXTERNAL_RASPI_PATH)/board/post-image.sh"

# Initramfs
BR2_TARGET_ROOTFS_CPIO=y
BR2_TARGET_ROOTFS_CPIO_XZ=y

# Disable tarball rootfs
BR2_TARGET_ROOTFS_TAR=n

# Raspberry Pi Firmware
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_BOOTCODE_BIN=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_VARIANT_PI=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_VARIANT_PI_X=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_VARIANT_PI_CD=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_VARIANT_PI_DB=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_VARIANT_PI4=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_VARIANT_PI4_X=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_VARIANT_PI4_CD=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_VARIANT_PI4_DB=y
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_CONFIG_FILE="$(BR2_EXTERNAL_RASPI_PATH)/board/config.txt"
BR2_PACKAGE_RPI_FIRMWARE_EXTERNAL_CMDLINE_FILE="$(BR2_EXTERNAL_RASPI_PATH)/board/cmdline.txt"

# Raspberry Pi Firmware (Bluetooth/Wifi)
BR2_PACKAGE_BRCMFMAC_SDIO_FIRMWARE_RPI=y
BR2_PACKAGE_BRCMFMAC_SDIO_FIRMWARE_RPI_BT=y
BR2_PACKAGE_BRCMFMAC_SDIO_FIRMWARE_RPI_WIFI=y

# Wireless regulatory database
BR2_PACKAGE_WIRELESS_REGDB=y

# Wireless tools and daemon
BR2_PACKAGE_IW=y
BR2_PACKAGE_IWD=y

# Raspberry Pi Userland Tools
BR2_PACKAGE_RPI_USERLAND=y

# Daemon to balance interrupts for SMP systems
BR2_PACKAGE_IRQBALANCE=y

# Systemd
BR2_PACKAGE_SYSTEMD_LOGIND=y
BR2_PACKAGE_SYSTEMD_UTMP=y

# UPower
BR2_PACKAGE_UPOWER=y

# PAM
BR2_PACKAGE_LINUX_PAM=y

# NSS
BR2_PACKAGE_LIBNSS=y

# Secure Shell Server and Client
BR2_PACKAGE_OPENSSH=y

# Cryptography SSL/TLS Toolkit
BR2_PACKAGE_OPENSSL=y
BR2_PACKAGE_LIBOPENSSL=y
BR2_PACKAGE_LIBOPENSSL_BIN=y

# Certificate Authority Certificates
BR2_PACKAGE_CA_CERTIFICATES=y

# Asynchronous Resolver
BR2_PACKAGE_C_ARES=y

# XML/XSLT
BR2_PACKAGE_LIBXML2=y
BR2_PACKAGE_LIBXSLT=y

# Secure Shell Library
BR2_PACKAGE_LIBSSH2=y

# I18N Domain
BR2_PACKAGE_LIBIDN2=y

# Brotli
BR2_PACKAGE_BROTLI=y

# HTTP2
BR2_PACKAGE_NGHTTP2=y

# cURL
BR2_PACKAGE_LIBCURL=y
BR2_PACKAGE_LIBCURL_CURL=y

# Bluetooth Utility
BR2_PACKAGE_BLUEZ5_UTILS=y
BR2_PACKAGE_BLUEZ5_UTILS_CLIENT=y

# Avahi mDNS Daemon
BR2_PACKAGE_AVAHI=y
BR2_PACKAGE_AVAHI_AUTOIPD=y
BR2_PACKAGE_AVAHI_DAEMON=y
BR2_PACKAGE_AVAHI_LIBAVAHI_CLIENT=y
BR2_PACKAGE_AVAHI_LIBDNSSD_COMPATIBILITY=y

# PipeWire
BR2_PACKAGE_PIPEWIRE=y
BR2_PACKAGE_PIPEWIRE_V4L2=y

# PulseAudio
BR2_PACKAGE_PULSEAUDIO=y

# Mesa
BR2_PACKAGE_MESA3D=y
BR2_PACKAGE_MESA3D_DRIVER=y
BR2_PACKAGE_MESA3D_GALLIUM_DRIVER=y
BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_V3D=y
BR2_PACKAGE_MESA3D_OPENGL_GLX=y
BR2_PACKAGE_MESA3D_OPENGL_ES=y

# Xorg
BR2_PACKAGE_XORG7=y

# Xorg Servers
# BR2_PACKAGE_XSERVER_XORG_SERVER=y
BR2_PACKAGE_XWAYLAND=y

# Xorg Input (Required xorg-server)
BR2_PACKAGE_XDRIVER_XF86_INPUT_EVDEV=y
BR2_PACKAGE_XDRIVER_XF86_INPUT_LIBINPUT=y
BR2_PACKAGE_XDRIVER_XF86_INPUT_MOUSE=y

# Xorg Video (Required xorg-server)
BR2_PACKAGE_XDRIVER_XF86_VIDEO_FBDEV=y

# GTK3
BR2_PACKAGE_LIBGTK3=y

# Graphical Boot
BR2_PACKAGE_SYSTEMD_DEFAULT_TARGET="graphical.target"

# Display Manager
BR2_PACKAGE_GDM=y

# Window Manager
BR2_PACKAGE_MATCHBOX=y
BR2_PACKAGE_MATCHBOX_SM=y

# Python
# BR2_PACKAGE_PYTHON3=y
# BR2_PACKAGE_PYTHON3_PY_PYC=y

# Kodi
# BR2_PACKAGE_KODI=y
# BR2_PACKAGE_KODI_ALSA_LIB=y
# BR2_PACKAGE_KODI_AVAHI=y
# BR2_PACKAGE_KODI_BLUEZ=y
# BR2_PACKAGE_KODI_DBUS=y
# BR2_PACKAGE_KODI_EVENTCLIENTS=y
# BR2_PACKAGE_KODI_LIBCEC=y
# BR2_PACKAGE_KODI_LIBMICROHTTPD=y
# BR2_PACKAGE_KODI_PULSEAUDIO=y
# BR2_PACKAGE_KODI_RENDER_SYSTEM_GLES=y
# BR2_PACKAGE_KODI_UPNP=y
